name: Demo Blaze Web UI and Gorest API Automation Tests Framework

on:
 push:
   branches: [ "main" ]
 pull_request:
   branches: [ "main" ]

jobs:
 run-api-automation-test:
   runs-on: ubuntu-latest
 run-web-automation-test:
   runs-on: ubuntu-latest

   permissions:
     contents: write

   steps:
   - uses: actions/checkout@v4
  
   - name: Set up JDK 17
     uses: actions/setup-java@v4
     with:
       java-version: '17'
       distribution: 'temurin'

   - name: Setup Chrome
     uses: browser-actions/setup-chrome@v1.7.2       

   - name: Setup Gradlew
     run: chmod +x gradlew

   - name: Execute Test
     run: ./gradlew webTest

   - name: Archive Test Result
     uses: actions/upload-artifact@v4
     if: always()
     with:
       name: Cucumber Report
       path: reports
    
   - name: Deploy report to Github Pages
     uses: peaceiris/actions-gh-pages@v3
     with:
       PERSONAL_TOKEN: ${{ secrets.GITHUB_TOKEN }}
       PUBLISH_DIR: ./public


